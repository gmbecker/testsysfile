language: r

warnings_are_errors: true

sudo: required

notifications:
  email:
    on_success: change
    on_failure: always

before_script:
  - echo "Show versions:"
  - export PKG_NAME=$(Rscript -e 'cat(paste0(devtools::as.package(".")$package))')
  - export PKG_TARBALL=$(Rscript -e 'pkg <- devtools::as.package("."); cat(paste0(pkg$package,"_",pkg$version,".tar.gz"))')
  - R CMD build .
  - R CMD INSTALL ${PKG_TARBALL}
  - Rscript -e "library(${PKG_NAME});devtools::session_info('${PKG_NAME}')"
